// Generated by uRequire v0.7.0-beta9  template: 'combined'
// Combined template optimized with RequireJS/r.js v2.1.15 & almond v0.3.0.
/**
 * @license almond 0.3.0 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,n){var r=!("function"!=typeof define||!define.amd),t="object"==typeof exports,o=function(){var e,r,t;!function(n){function o(e,n){return b.call(e,n)}function i(e,n){var r,t,o,i,u,a,c,s,l,f,d,p=n&&n.split("/"),v=y.map,h=v&&v["*"]||{};if(e&&"."===e.charAt(0))if(n){for(p=p.slice(0,p.length-1),e=e.split("/"),u=e.length-1,y.nodeIdCompat&&x.test(e[u])&&(e[u]=e[u].replace(x,"")),e=p.concat(e),l=0;l<e.length;l+=1)if(d=e[l],"."===d)e.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||h)&&v){for(r=e.split("/"),l=r.length;l>0;l-=1){if(t=r.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if(o=v[p.slice(0,f).join("/")],o&&(o=o[t])){i=o,a=l;break}if(i)break;!c&&h&&h[t]&&(c=h[t],s=l)}!i&&c&&(i=c,a=s),i&&(r.splice(0,a,i),e=r.join("/"))}return e}function u(e,r){return function(){var t=w.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),p.apply(n,t.concat([e,r]))}}function a(e){return function(n){return i(n,e)}}function c(e){return function(n){m[e]=n}}function s(e){if(o(g,e)){var r=g[e];delete g[e],j[e]=!0,d.apply(n,r)}if(!o(m,e)&&!o(j,e))throw new Error("No "+e);return m[e]}function l(e){var n,r=e?e.indexOf("!"):-1;return r>-1&&(n=e.substring(0,r),e=e.substring(r+1,e.length)),[n,e]}function f(e){return function(){return y&&y.config&&y.config[e]||{}}}var d,p,v,h,m={},g={},y={},j={},b=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;v=function(e,n){var r,t=l(e),o=t[0];return e=t[1],o&&(o=i(o,n),r=s(o)),o?e=r&&r.normalize?r.normalize(e,a(n)):i(e,n):(e=i(e,n),t=l(e),o=t[0],e=t[1],o&&(r=s(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},h={require:function(e){return u(e)},exports:function(e){var n=m[e];return"undefined"!=typeof n?n:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:f(e)}}},d=function(e,r,t,i){var a,l,f,d,p,y,b=[],w=typeof t;if(i=i||e,"undefined"===w||"function"===w){for(r=!r.length&&t.length?["require","exports","module"]:r,p=0;p<r.length;p+=1)if(d=v(r[p],i),l=d.f,"require"===l)b[p]=h.require(e);else if("exports"===l)b[p]=h.exports(e),y=!0;else if("module"===l)a=b[p]=h.module(e);else if(o(m,l)||o(g,l)||o(j,l))b[p]=s(l);else{if(!d.p)throw new Error(e+" missing "+l);d.p.load(d.n,u(i,!0),c(l),{}),b[p]=m[l]}f=t?t.apply(m[e],b):void 0,e&&(a&&a.exports!==n&&a.exports!==m[e]?m[e]=a.exports:f===n&&y||(m[e]=f))}else e&&(m[e]=t)},e=r=p=function(e,r,t,o,i){if("string"==typeof e)return h[e]?h[e](r):s(v(e,r).f);if(!e.splice){if(y=e,y.deps&&p(y.deps,y.callback),!r)return;r.splice?(e=r,r=t,t=null):e=n}return r=r||function(){},"function"==typeof t&&(t=o,o=i),o?d(n,e,r,t):setTimeout(function(){d(n,e,r,t)},4),p},p.config=function(e){return p(e)},e._defined=m,t=function(e,n,r){n.splice||(r=n,n=[]),o(m,e)||o(g,e)||(g[e]=[e,n,r])},t.amd={jQuery:!0}}(),t("almond",function(){}),t("peer",["require","exports","module"],function(e,r,t){"use strict";var o=n.jet=n.jet||{};return o.Peer=function(e){e=e||{};var r=o.util.isDef,t=o.util.isArr,i=o.util.invalidParams,u=o.util.errorObject,a=e.url||"ws://127.0.0.1:11123",c=JSON.stringify,s=JSON.parse,l=n.WebSocket||n.MozWebSocket,f=new l(a,"jet"),d=[],p=!1,v=function(e){d.push(e)},h=!0,m=function(){var n;1===d.length?n=c(d[0]):d.length>1&&(n=c(d)),n&&(e.onSend&&e.onSend(n,d),f.send(n),d.length=0),h=!1},g={},y={},j=function(e){var n=e.id,t=y[n];delete y[n],t&&(r(e.result)?t.success&&t.success(e.result):r(e.error)&&t.error&&t.error(e.error))},b=function(e){var n=g[e.method];try{n(e)}catch(t){r(e.id)&&v({id:e.id,error:u(t)})}},w=function(e){e.method&&e.params?b(e):(r(e.result)||r(e.error))&&j(e)},x=function(n){var r=s(n.data);h=!0,e.onReceive&&e.onReceive(n.data,r),t(r)?r.forEach(function(e){w(e)}):w(r),m()};f.onmessage=x;var A={};A.close=function(){p=!0,m(),f.close()};var O=0,N=function(e,n,r,t){var o;if(p)throw new Error("Jet Websocket connection is closed");if(t){if(n.timeout=t.timeout,O+=1,o=O,r){if(t.success){var i=t.success;t.success=function(e){r(!0),i(e)}}else t.success=function(){r(!0)};if(t.error){var u=t.error;t.error=function(e){r(!1),u(e)}}else t.error=function(){r(!1)}}y[O]=t}else r&&r(!0);var a={id:o,method:e,params:n};h?v(a):f.send(c(a))};A.batch=function(e){h=!0,e(),m()},A.add=function(e,n,t){var o=e.path,i=function(e){e&&(g[o]=n)},u={path:o,value:e.value};N("add",u,i,t);var a={remove:function(e){a.isAdded()?A.remove(o,e):e.success()},isAdded:function(){return r(g[o])},add:function(t,o){a.isAdded()&&o.success(),r(t)&&(e.value=t),A.add(e,n,o)},path:function(){return o}};return a},A.remove=function(e,n){var r={path:e},t=function(){delete g[e]};N("remove",r,t,n)},A.call=function(e,n,r){var t={path:e,args:n||[],timeout:r&&r.timeout};N("call",t,null,r)},A.config=function(e,n){N("config",e,null,n)},A.set=function(e,n,r){var t={path:e,value:n,valueAsResult:r&&r.valueAsResult,timeout:r&&r.timeout};N("set",t,null,r)};var k=0;return A.fetch=function(e,n,t){var o="__f__"+k,i=e.sort;k+=1;var u,a=function(){g[o]=function(e){var t=e.params;r(i)?n(t.changes,t.n,u):n(t.path,t.event,t.value,u)}};return"string"==typeof e&&(e={path:{contains:e}}),e.id=o,N("fetch",e,a,t),u={unfetch:function(e){var n=function(){delete g[o]};N("unfetch",{id:o},n,e)},isFetching:function(){return r(g[o])},fetch:function(n){N("fetch",e,a,n)}}},A.method=function(e,n){var o;if(e.call)o=function(n){var o,i,a=n.params;try{o=t(a)&&a.length>0?e.call.apply(void 0,a):e.call.call(void 0,a)}catch(c){i=c}var s=n.id;r(s)&&v(r(i)?{id:s,error:u(i)}:{id:s,result:o||{}})};else{if(!e.callAsync)throw"invalid method desc"+(e.path||"?");o=function(n){var o=function(t,o){var i=n.id;if(t=t||{},r(i)){var u={id:i};r(t.result)&&!r(t.error)?u.result=t.result:u.error=r(t.error)?t.error:"jet.peer Invalid async method response "+e.path,v(u),h||o||m()}},i=n.params;try{t(i)&&i.length>0?(i.push(o),e.callAsync.apply(void 0,i)):e.callAsync.call(void 0,i,o)}catch(a){var c=n.id;r(c)&&v({id:c,error:u(a)})}}}var i=A.add(e,o,n);return i},A.state=function(e,n){var t;t=e.set?function(n){var t=n.params.value;try{var o=e.set(t)||{};e.value=o.value||t;var i=n.id;r(i)&&v({id:i,result:!0}),o.dontNotify||v({method:"change",params:{path:e.path,value:e.value}})}catch(a){r(n.id)&&v({id:n.id,error:u(a)})}}:r(e.setAsync)?function(n){var t=n.params.value,o=function(o){var i=n.id;if(o=o||{},o.result=r(o.result)||t,r(i)){var a={id:i};r(o.error)?a.error=u(o.error):a.result=o.result,v(a)}r(o.result)&&!r(o.dontNotify)&&(e.value=r(o.value)?o.value:t,v({method:"change",params:{path:e.path,value:e.value}})),h||o.dontFlush||m()};try{e.setAsync(t,o)}catch(i){var a=n.id;r(a)&&v({id:a,error:u(i)})}}:function(n){var t=n.id;r(t)&&v({id:t,error:i(e.path+" is read-only")})};var o=A.add(e,t,n);return o.value=function(n){return r(n)?(e.value=n,v({method:"change",params:{path:e.path,value:n}}),h||m(),void 0):e.value},o},f.onclose=function(){p=!0,e.onClose&&e.onClose()},f.onerror=function(n){p=!0,e.onError&&e.onError(n)},f.onopen=function(){r(e.name)?A.config({name:e.name},{success:function(){m(),e.onOpen&&e.onOpen(A)},error:function(){A.close()}}):e.onOpen&&e.onOpen(A),m()},A},t.exports}),t("util",["require","exports","module"],function(e,r,t){"use-strict";var o=n.jet=n.jet||{};return o.util={},n.jet.util.invalidParams=function(e){var n={code:-32602,message:"Invalid params",data:e};return n},n.jet.util.errorObject=function(e){var r,t=n.jet.util.isDef;return"object"==typeof e&&t(e.code)&&t(e.message)?e:("object"==typeof e&&(r={},r.message=e.message,r.lineNumber=e.lineNumber,r.fileName=e.fileName),{code:-32602,message:"Internal error",data:r||e})},n.jet.util.isDef=function(e){return"undefined"!=typeof e},n.jet.util.isArr=function(e){return e instanceof Array},t.exports}),r("peer"),r("util")};return r?define(o):t?module.exports=o():o()}).call(this,"object"==typeof exports||"undefined"==typeof window?global:window,"object"==typeof exports||"undefined"==typeof window?global:window);